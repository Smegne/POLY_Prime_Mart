<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prime Mart - Cart</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
    <div class="container">
      <a class="navbar-brand" href="/">
        <img src="https://via.placeholder.com/30x30?text=Cart" alt="Cart Icon" class="me-2" style="width: 30px;">
        PRIME MART
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav mx-auto">
          <li class="nav-item">
            <a class="nav-link" href="/">HOME</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/about">ABOUT US</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/products">SHOP</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/contact">CONTACT</a>
          </li>
        </ul>
        <ul class="navbar-nav ms-auto">
          <% if (session.user) { %>
            <li class="nav-item">
              <a class="nav-link" href="/wishlist">WISHLIST</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/cart">CART | ₹<span id="cart-total-nav">0.00</span></a>
            </li>
            <li class="nav-item">
              <span class="nav-link">Welcome, <%= session.user %></span>
            </li>
            <li class="nav-item">
              <a class="nav-link btn btn-outline-danger" href="/logout">LOGOUT</a>
            </li>
          <% } else { %>
         
            <li class="nav-item">
              <a class="nav-link" href="/cart">CART | ₹<span id="cart-total-nav">0.00</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link btn btn-outline-primary me-2" href="/login">LOGIN</a>
            </li>
           
          <% } %>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Cart Section -->
  <section class="cart-section py-5">
    <div class="container">
      <h2 class="text-center mb-5">YOUR CART</h2>
      <div id="cart-items">
        <!-- Cart items will be dynamically added here -->
      </div>
      <div class="text-end mt-4">
        <h4>Total: ₹<span id="cart-total">0.00</span></h4>
        <a href="/checkout" class="btn btn-success btn-lg">PROCEED TO CHECKOUT</a>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-purple text-white py-4">
    <div class="container">
      <div class="row">
        <div class="col-md-4">
          <h5>ABOUT US</h5>
          <p>
            Welcome to Prime Mart, the ultimate destination for premium BRANDED clothing. We specialize in offering a curated selection of high-quality, stylish apparel from top global brands. Our collection is designed for fashion-conscious individuals.
          </p>
        </div>
        <div class="col-md-4">
          <h5>QUICK LINKS</h5>
          <ul class="list-unstyled">
            <li><a href="/about" class="text-white">About us</a></li>
            <li><a href="/privacy" class="text-white">Privacy Policy</a></li>
            <li><a href="/terms" class="text-white">Terms and Conditions</a></li>
          </ul>
        </div>
        <div class="col-md-4">
          <h5>REACH US AT</h5>
          <p>PRIME MART DEALS</p>
          <p><a href="mailto:support@classicstore.co" class="text-white">support@classicstore.co</a></p>
        </div>
      </div>
      <div class="text-center mt-3">
        <p>© 2025 Prime Mart. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Function to display cart items
    function displayCart() {
      const cartItems = document.getElementById('cart-items');
      const cartTotal = document.getElementById('cart-total');
      const cartTotalNav = document.getElementById('cart-total-nav');
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      
      if (cart.length === 0) {
        cartItems.innerHTML = '<p class="text-center">Your cart is empty.</p>';
        cartTotal.textContent = '0.00';
        cartTotalNav.textContent = '0.00';
        return;
      }

      let total = 0;
      cartItems.innerHTML = '';
      cart.forEach((item, index) => {
        total += item.price;
        cartItems.innerHTML += `
          <div class="card mb-3">
            <div class="card-body">
              <div class="d-flex justify-content-between">
                <div>
                  <h5>${item.name}</h5>
                  <p>₹${item.price.toFixed(2)} <span class="text-muted text-decoration-line-through">₹${item.originalPrice.toFixed(2)}</span></p>
                </div>
                <button class="btn btn-danger" onclick="removeFromCart(${index})">Remove</button>
              </div>
            </div>
          </div>
        `;
      });
      cartTotal.textContent = total.toFixed(2);
      cartTotalNav.textContent = total.toFixed(2);
    }

    // Function to remove item from cart
    function removeFromCart(index) {
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      cart.splice(index, 1);
      localStorage.setItem('cart', JSON.stringify(cart));
      displayCart();
    }

    // Load cart on page load
    document.addEventListener('DOMContentLoaded', displayCart);
  </script>
</body>
</html>